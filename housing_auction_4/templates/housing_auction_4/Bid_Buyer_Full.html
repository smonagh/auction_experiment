{% extends "housing_auction_4/Bid.html" %}
{% load staticfiles otree %}

{% block bid_buyer_full %}
<div class="">

<h3>Please submit bids for the widgets that you would like to purchase</h3>
<!-- For loop to create highest bidder entries for each object -->
<h5 style="white-space:nowrap; overflow:hidden;"> Your remaining budget to
  spend on bids is: <div style="text-align:right; display:inline;"
  id="budget">{{player.budget}} </div></h5>
{% for i in object_list %}
  <h5 hidden id="highest_bid_{{forloop.counter}}" style="white-space:nowrap; overflow:hidden;">
    You are the highest bidder for {{i}} with a bid of <div id="highest_bid_amount_{{forloop.counter}}"
    style="display:inline; text-align:right;"></div>
  </h5>
{% endfor %}
</div>
<table style="width:100%" border="spacing:10px" >
    <tr>
    <th><center>Widget</center></th>
        <th><center>Minimum Ask Price</center></th>
        <th><center>Your Value</center></th>
        <th><center>Standing Bid</center></th>
        <th><center>Enter Bid</center></th>
    </tr>

    {% for object,ask,res,bid in auction_zip %}
        <tr id="row_{{forloop.counter}}">
            <td id="object_{{forloop.counter}}">{{object}}</td>
            <td id="ask_price_{{forloop.counter}}">{{ask}}</td>
            {% if player_type == "buyer" %}
            <td id="reservation_{{forloop.counter}}">{{res}}</td>
            {% endif %}
            <td id="current_bid_{{forloop.counter}}">{{bid}}</td>
            <td  id="enter_bid_{{forloop.counter}}">
                <input type="number" placeholder="Enter Bid" id="input_{{forloop.counter}}">
                <br>
                <!-- Input button returns the object_id, the current standing bid,
                     the ask price for the object, and the new input bid to
                     javascript to verify that the bid clears the previous
                     one -->
                <input id='bid_btn_{{forloop.counter}}'
                       class="btn  btn-large btn-primary next-button"
                       onclick='sendmessage("input_{{forloop.counter}}",
                       {{forloop.counter}},current_bid_{{forloop.counter}}.innerHTML,
                       ask_price_{{forloop.counter}}.innerHTML,
                       reservation_{{forloop.counter}}.innerHTML)'
                       type="reset" value="Bid">
            </td>
        </tr>
    {% endfor %}
  </table>
    <!-- Button for soft close -->
    <button id="close_button" class="btn btn-primary"
    onclick='soft_close()' type='button' >Finished Bidding</button>
    <p id="after_close" hidden>Please wait for other players to finish bidding </p>

{% endblock %}
